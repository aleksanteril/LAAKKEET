<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="1099px" preserveAspectRatio="none" style="width:1468px;height:1099px;background:#FFFFFF;" version="1.1" viewBox="0 0 1468 1099" width="1468px" zoomAndPan="magnify"><defs/><g><g id="STANDBY"><rect fill="#F1F1F1" height="92.1719" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="330.1484" x="296.12" y="176.18"/><line style="stroke:#181818;stroke-width:0.5;" x1="296.12" x2="626.2684" y1="202.4769" y2="202.4769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.4248" x="427.9818" y="194.1751">STANDBY</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="229.5762" x="301.12" y="218.6155">eEnter / reset_machine(m), timer = 0;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="223.8457" x="301.12" y="232.5843">eTick [timer % 20 = 0] / led_toggle();</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="310.1484" x="301.12" y="246.553">eTick [timer&gt;=600] / send_msg(EMPTY), timer = 0;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95.3086" x="301.12" y="260.5218">eExit / led_off();</text></g><g id="RECALIBRATE"><rect fill="#F1F1F1" height="92.1719" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171.1367" x="893.63" y="7"/><line style="stroke:#181818;stroke-width:0.5;" x1="893.63" x2="1064.7667" y1="33.2969" y2="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.1611" x="931.1178" y="24.9951">RECALIBRATE</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135.5977" x="898.63" y="49.4355">eEnter / re_calibrate();</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151.1367" x="898.63" y="63.4043">eEnter / recall_position();</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39.4512" x="898.63" y="77.373">eTick /</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="37.9629" x="898.63" y="91.3418">eExit /</text></g><g class="entity" data-entity="N1" data-source-line="17" data-uid="ent0004" id="entity_N1"><path d="M1105.01,10.26 L1105.01,95.9241 L1461.3884,95.9241 L1461.3884,20.26 L1451.3884,10.26 L1105.01,10.26" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1451.3884,10.26 L1451.3884,20.26 L1461.3884,20.26 L1451.3884,10.26" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.9438" x="1115.1423" y="27.3269">- struct Machine, jossa pill_count,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.7104" x="1115.1423" y="42.4597">sun muut yleiset tiedot stateille.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.3687" x="1115.1423" y="57.5925">- Olkoon 1 tick aluksi 50ms.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304.1099" x="1115.1423" y="72.7253">- send_msg() on viestin l&#228;hetys LoRa verkkoon</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331.2461" x="1115.1423" y="87.8581">- EEPROM Tallennus tapahtuu aina kun tila vaihtuu</text></g><g id="CHECK_CALIBRATION"><rect fill="#F1F1F1" height="78.2031" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169.4678" x="697.46" y="349.08"/><line style="stroke:#181818;stroke-width:0.5;" x1="697.46" x2="866.9278" y1="375.3769" y2="375.3769"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.4678" x="707.46" y="367.0751">CHECK_CALIBRATION</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117.2813" x="702.46" y="391.5155">eEnter / calibrate();</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39.4512" x="702.46" y="405.4843">eTick /</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="37.9629" x="702.46" y="419.453">eExit /</text></g><g id="CALIBRATED"><rect fill="#F1F1F1" height="78.2031" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="277.332" x="651.53" y="508.01"/><line style="stroke:#181818;stroke-width:0.5;" x1="651.53" x2="928.862" y1="534.3069" y2="534.3069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.3682" x="746.0119" y="526.0051">CALIBRATED</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="257.332" x="656.53" y="550.4455">eEnter / led_on(); send_msg(CALIBRATED);</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39.4512" x="656.53" y="564.4143">eTick /</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95.3086" x="656.53" y="578.383">eExit / led_off();</text></g><g id="DISPENSE_WAIT"><rect fill="#F1F1F1" height="92.1719" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="291.3887" x="350.5" y="663.21"/><line style="stroke:#181818;stroke-width:0.5;" x1="350.5" x2="641.8887" y1="689.5069" y2="689.5069"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.3896" x="439.9995" y="681.2051">DISPENSE_WAIT</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="194.4258" x="355.5" y="705.6455">eEnter / make_timeout_stamp();</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="271.3887" x="355.5" y="719.6143">eEnter [RETRY TWICE!] / send_msg(STATUS);</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39.4512" x="355.5" y="733.583">eTick /</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="37.9629" x="355.5" y="747.5518">eExit /</text></g><g id="DISPENSE_PILL"><rect fill="#F1F1F1" height="92.1719" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="203.1055" x="609.64" y="832.39"/><line style="stroke:#181818;stroke-width:0.5;" x1="609.64" x2="812.7455" y1="858.6869" y2="858.6869"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.46" x="658.9628" y="850.3851">DISPENSE_PILL</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="183.1055" x="614.64" y="874.8255">eEnter / timer = 0, dispense();</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140.1211" x="614.64" y="888.7943">eEnter / ++turn_count;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99.4629" x="614.64" y="902.763">eTick / ++timer;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="37.9629" x="614.64" y="916.7318">eExit /</text></g><g id="DISPENSE_OK"><rect fill="#F1F1F1" height="78.2031" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="196.0332" x="114.18" y="1008.54"/><line style="stroke:#181818;stroke-width:0.5;" x1="114.18" x2="310.2132" y1="1034.8369" y2="1034.8369"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.4893" x="163.952" y="1026.5351">DISPENSE_OK</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="176.0332" x="119.18" y="1050.9755">eEnter / send_msg(DISP_OK);</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39.4512" x="119.18" y="1064.9443">eTick /</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="37.9629" x="119.18" y="1078.913">eExit /</text></g><g id="DISPENSE_FAIL"><rect fill="#F1F1F1" height="92.1719" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="269.2754" x="767.56" y="1001.56"/><line style="stroke:#181818;stroke-width:0.5;" x1="767.56" x2="1036.8354" y1="1027.8569" y2="1027.8569"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8477" x="849.2739" y="1019.5551">DISPENSE_FAIL</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="249.2754" x="772.56" y="1043.9955">eEnter / timer = 0; send_msg(DISP_FAIL);</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99.4629" x="772.56" y="1057.9643">eTick / ++timer;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="223.8457" x="772.56" y="1071.933">eTick [timer % 20 = 0] / led_toggle();</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95.3086" x="772.56" y="1085.9018">eExit / led_off();</text></g><ellipse cx="461.2" cy="53.09" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><g class="entity" data-entity="GMN2" data-source-line="18" data-uid="ent0003" id="entity_GMN2"><path d="M6,194.56 L6,249.9584 A0,0 0 0 0 6,249.9584 L256.3916,249.9584 A0,0 0 0 0 256.3916,249.9584 L256.3916,226.26 L295.99,222.26 L256.3916,218.26 L256.3916,204.56 L246.3916,194.56 L6,194.56 A0,0 0 0 0 6,194.56" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M246.3916,194.56 L246.3916,204.56 L256.3916,204.56 L246.3916,194.56" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195.3491" x="12" y="211.6269">When the dispenser is started</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221.127" x="16.1323" y="226.7597">it waits for a button to be pressed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.4438" x="16.1323" y="241.8925">and blinks an LED while waiting.</text></g><g class="entity" data-entity="GMN5" data-source-line="26" data-uid="ent0006" id="entity_GMN5"><path d="M311.24,345.35 L311.24,431.0141 A0,0 0 0 0 311.24,431.0141 L657.1448,431.0141 A0,0 0 0 0 657.1448,431.0141 L657.1448,392.18 L697.05,388.18 L657.1448,384.18 L657.1448,355.35 L647.1448,345.35 L311.24,345.35 A0,0 0 0 0 311.24,345.35" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M647.1448,345.35 L647.1448,355.35 L657.1448,355.35 L647.1448,345.35" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.689" x="317.24" y="362.4169">When the button is pressed the dispenser</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.0767" x="321.3723" y="377.5497">is calibrated by turning the wheel</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255.0488" x="321.3723" y="392.6825">at least one full turn and then stopping</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263.0723" x="321.3723" y="407.8153">the wheel so that the compartment with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320.7725" x="321.3723" y="422.9481">the sensor opening is aligned with the drop tube.</text></g><g class="entity" data-entity="GMN8" data-source-line="33" data-uid="ent0009" id="entity_GMN8"><path d="M289.21,526.98 L289.21,567.2456 A0,0 0 0 0 289.21,567.2456 L611.1778,567.2456 A0,0 0 0 0 611.1778,567.2456 L611.1778,551.11 L651.34,547.11 L611.1778,543.11 L611.1778,536.98 L601.1778,526.98 L289.21,526.98 A0,0 0 0 0 289.21,526.98" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M601.1778,526.98 L601.1778,536.98 L611.1778,536.98 L601.1778,526.98" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.9019" x="295.21" y="544.0469">After calibration the program keeps</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296.8354" x="299.3423" y="559.1797">the LED on until user presses another button.</text></g><g class="entity" data-entity="GMN11" data-source-line="42" data-uid="ent0012" id="entity_GMN11"><path d="M6.19,689.17 L6.19,729.4356 A0,0 0 0 0 6.19,729.4356 L310.2003,729.4356 A0,0 0 0 0 310.2003,729.4356 L310.2003,713.3 L350.18,709.3 L310.2003,705.3 L310.2003,699.17 L300.2003,689.17 L6.19,689.17 A0,0 0 0 0 6.19,689.17" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M300.2003,689.17 L300.2003,699.17 L310.2003,699.17 L300.2003,689.17" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.9136" x="12.19" y="706.2369">Then it dispenses pills every</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278.8779" x="16.3223" y="721.3697">30 seconds starting from the button press.</text></g><g class="entity" data-entity="GMN14" data-source-line="43" data-uid="ent0015" id="entity_GMN14"><path d="M681.84,681.6 L681.84,705.3 L642.3,709.3 L681.84,713.3 L681.84,736.9984 A0,0 0 0 0 681.84,736.9984 L936.548,736.9984 A0,0 0 0 0 936.548,736.9984 L936.548,691.6 L926.548,681.6 L681.84,681.6 A0,0 0 0 0 681.84,681.6" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M926.548,681.6 L926.548,691.6 L936.548,691.6 L926.548,681.6" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.5757" x="687.84" y="698.6669">When all pills have been dispensed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.605" x="691.9723" y="713.7997">(wheel turned 7 times)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.6816" x="691.9723" y="728.9325">the program starts over.</text></g><g class="entity" data-entity="GMN17" data-source-line="57" data-uid="ent0018" id="entity_GMN17"><path d="M320.5,850.77 L320.5,906.1684 A0,0 0 0 0 320.5,906.1684 L569.9014,906.1684 A0,0 0 0 0 569.9014,906.1684 L569.9014,882.47 L609.26,878.47 L569.9014,874.47 L569.9014,860.77 L559.9014,850.77 L320.5,850.77 A0,0 0 0 0 320.5,850.77" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M559.9014,850.77 L559.9014,860.77 L569.9014,860.77 L559.9014,850.77" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.3613" x="326.5" y="867.8369">When the wheel is turned,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.1367" x="330.6323" y="882.9697">the piezo sensor is used to detect</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.2773" x="330.6323" y="898.1025">if a pill was dispensed or not.</text></g><g class="entity" data-entity="GMN20" data-source-line="65" data-uid="ent0021" id="entity_GMN20"><path d="M350.7,1035.08 L350.7,1060.2128 A0,0 0 0 0 350.7,1060.2128 L727.6829,1060.2128 A0,0 0 0 0 727.6829,1060.2128 L727.6829,1053.08 L767.23,1047.64 L727.6829,1045.08 L727.6829,1045.08 L717.6829,1035.08 L350.7,1035.08 A0,0 0 0 0 350.7,1035.08" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M717.6829,1035.08 L717.6829,1045.08 L727.6829,1045.08 L717.6829,1035.08" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="355.9829" x="356.7" y="1052.1469">If no pill was detected (200ms) the LED blinks 5 times.</text></g><!--link *start* to STANDBY--><g class="link" data-entity-1=".start." data-entity-2="STANDBY" data-source-line="1" data-uid="lnk3" id="link_.start._STANDBY"><path d="M461.2,63.56 C461.2,84.76 461.2,131.24 461.2,169.86" fill="none" id="*start*-to-STANDBY" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="461.2,175.86,465.2,166.86,461.2,170.86,457.2,166.86,461.2,175.86" style="stroke:#181818;stroke-width:1;"/></g><!--link STANDBY to CHECK_CALIBRATION--><g class="link" data-entity-1="STANDBY" data-entity-2="CHECK_CALIBRATION" data-source-line="6" data-uid="lnk4" id="link_STANDBY_CHECK_CALIBRATION"><path d="M626.61,245.17 C690.71,257.18 753.64,274.56 774.2,298.35 C785.94,311.94 788.857,325.4526 788.347,342.7326" fill="none" id="STANDBY-to-CHECK_CALIBRATION" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="788.17,348.73,792.4338,339.8519,788.3175,343.7322,784.4373,339.6159,788.17,348.73" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.8872" x="784.2" y="311.4169">eSW0 /</text></g><!--link CHECK_CALIBRATION to STANDBY--><g class="link" data-entity-1="CHECK_CALIBRATION" data-entity-2="STANDBY" data-source-line="23" data-uid="lnk8" id="link_CHECK_CALIBRATION_STANDBY"><path d="M697.13,351.2 C690.45,349.02 683.75,347.03 677.2,345.35 C624.49,331.83 470.24,356.11 434.2,315.35 C422.83,302.49 422.7098,290.6239 429.3398,274.4039" fill="none" id="CHECK_CALIBRATION-to-STANDBY" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="431.61,268.85,424.5021,275.6674,429.7182,273.4783,431.9073,278.6944,431.61,268.85" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="328.3643" x="435.2" y="311.4169">eTick [calibrated = false] / send_msg(CALIB_FAIL);</text></g><!--link *start* to RECALIBRATE--><g class="link" data-entity-1=".start." data-entity-2="RECALIBRATE" data-source-line="8" data-uid="lnk5" id="link_.start._RECALIBRATE"><path d="M471.54,53.09 C523.95,53.09 756.66,53.09 887.24,53.09" fill="none" id="*start*-to-RECALIBRATE" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="893.24,53.09,884.24,49.09,888.24,53.09,884.24,57.09,893.24,53.09" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381.6846" x="491.91" y="31.1569">[If state loaded from EEPROM on boot was DISPENSE_PILL]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.728" x="602.4544" y="46.2897">/ Recalibrate the spinner.</text></g><!--link RECALIBRATE to STANDBY--><g class="link" data-entity-1="RECALIBRATE" data-entity-2="STANDBY" data-source-line="13" data-uid="lnk6" id="link_RECALIBRATE_STANDBY"><path d="M893.3,64.61 C819.86,75.38 712.23,95.42 623.2,129.18 C591.28,141.27 563.3084,155.9587 535.3884,172.6687" fill="none" id="RECALIBRATE-to-STANDBY" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="530.24,175.75,540.0167,174.5603,534.5303,173.1823,535.9084,167.6958,530.24,175.75" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="341.5229" x="624.2" y="142.2469">eEnter [calibrated = false] / send_msg(RECAL_FAIL);</text></g><!--link RECALIBRATE to DISPENSE_PILL--><g class="link" data-entity-1="RECALIBRATE" data-entity-2="DISPENSE_PILL" data-source-line="14" data-uid="lnk7" id="link_RECALIBRATE_DISPENSE_PILL"><path d="M986.73,99.36 C991.66,132.91 997.2,179.81 997.2,221.26 C997.2,221.26 997.2,221.26 997.2,710.3 C997.2,754.23 900.9135,802.9544 818.7835,836.9644" fill="none" id="RECALIBRATE-to-DISPENSE_PILL" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="813.24,839.26,823.0856,839.5123,817.8596,837.347,820.0249,832.121,813.24,839.26" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.7388" x="998.2" y="474.0769">eTick /</text></g><!--link CHECK_CALIBRATION to CALIBRATED--><g class="link" data-entity-1="CHECK_CALIBRATION" data-entity-2="CALIBRATED" data-source-line="24" data-uid="lnk9" id="link_CHECK_CALIBRATION_CALIBRATED"><path d="M777.5,427.71 C776.26,443.34 775.64,461.56 777.2,478.01 C778.11,487.72 778.645,492.2026 780.455,501.8626" fill="none" id="CHECK_CALIBRATION-to-CALIBRATED" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="781.56,507.76,783.8341,498.1773,780.6392,502.8455,775.9709,499.6506,781.56,507.76" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.0986" x="778.2" y="474.0769">eTick [calibrated = true] /</text></g><!--link CALIBRATED to DISPENSE_WAIT--><g class="link" data-entity-1="CALIBRATED" data-entity-2="DISPENSE_WAIT" data-source-line="31" data-uid="lnk10" id="link_CALIBRATED_DISPENSE_WAIT"><path d="M719.4,586.69 C677.35,609.6 629.0586,635.9091 584.9586,659.9391" fill="none" id="CALIBRATED-to-DISPENSE_WAIT" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="579.69,662.81,589.5068,662.0161,584.0805,660.4176,585.679,654.9913,579.69,662.81" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.1089" x="661.2" y="629.2769">eSW1 / send_msg(DISP_START)</text></g><!--link DISPENSE_WAIT to DISPENSE_PILL--><g class="link" data-entity-1="DISPENSE_WAIT" data-entity-2="DISPENSE_PILL" data-source-line="39" data-uid="lnk11" id="link_DISPENSE_WAIT_DISPENSE_PILL"><path d="M554.66,755.76 C585.13,779.45 617.543,804.6574 648.003,828.3374" fill="none" id="DISPENSE_WAIT-to-DISPENSE_PILL" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="652.74,832.02,648.0896,823.3382,648.7925,828.9512,643.1795,829.6541,652.74,832.02" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.8682" x="610.2" y="798.4569">eTick [time_reached(TIMEOUT)] /</text></g><!--link DISPENSE_WAIT to STANDBY--><g class="link" data-entity-1="DISPENSE_WAIT" data-entity-2="STANDBY" data-source-line="40" data-uid="lnk12" id="link_DISPENSE_WAIT_STANDBY"><path d="M356.43,662.78 C321.97,644.58 289.22,619.73 269.2,586.21 C214.05,493.94 235.82,437.48 291.2,345.35 C310.1,313.89 335.5231,291.5257 365.4631,272.0157" fill="none" id="DISPENSE_WAIT-to-STANDBY" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="370.49,268.74,360.7658,270.3023,366.3009,271.4698,365.1335,277.0048,370.49,268.74" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301.355" x="241.2" y="474.0769">eEnter [turn_count &gt;= 7] / send_msg(EMPTY);</text></g><!--link DISPENSE_PILL to DISPENSE_OK--><g class="link" data-entity-1="DISPENSE_PILL" data-entity-2="DISPENSE_OK" data-source-line="49" data-uid="lnk13" id="link_DISPENSE_PILL_DISPENSE_OK"><path d="M609.37,917.97 C602.9,920.25 596.47,922.46 590.2,924.56 C476.31,962.66 444.98,963.15 331.2,1001.56 C324.5,1003.82 323.2599,1004.2004 316.3499,1006.6704" fill="none" id="DISPENSE_PILL-to-DISPENSE_OK" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="310.7,1008.69,320.5212,1009.4272,315.4082,1007.007,317.8285,1001.894,310.7,1008.69" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.2983" x="492.2" y="967.6269">ePiezo / ++pill_count;</text></g><!--link DISPENSE_PILL to DISPENSE_FAIL--><g class="link" data-entity-1="DISPENSE_PILL" data-entity-2="DISPENSE_FAIL" data-source-line="50" data-uid="lnk14" id="link_DISPENSE_PILL_DISPENSE_FAIL"><path d="M714.34,924.89 C717.44,941.1 723.29,958.55 734.2,971.56 C743.84,983.07 750.5871,989.5982 763.3671,997.9482" fill="none" id="DISPENSE_PILL-to-DISPENSE_FAIL" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="768.39,1001.23,763.0435,992.9587,764.2042,998.4952,758.6677,999.6559,768.39,1001.23" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.0508" x="735.2" y="967.6269">eTick [timer &gt;= 4] /</text></g><!--link DISPENSE_OK to DISPENSE_WAIT--><g class="link" data-entity-1="DISPENSE_OK" data-entity-2="DISPENSE_WAIT" data-source-line="55" data-uid="lnk15" id="link_DISPENSE_OK_DISPENSE_WAIT"><path d="M210.51,1008.14 C210.46,961.82 216.94,883.87 256.2,832.39 C281.56,799.11 313.1448,776.8257 350.4948,758.4757" fill="none" id="DISPENSE_OK-to-DISPENSE_WAIT" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="355.88,755.83,346.0384,756.2085,351.3924,758.0348,349.5661,763.3887,355.88,755.83" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.7388" x="257.2" y="883.0369">eTick /</text></g><!--link DISPENSE_FAIL to DISPENSE_WAIT--><g class="link" data-entity-1="DISPENSE_FAIL" data-entity-2="DISPENSE_WAIT" data-source-line="63" data-uid="lnk16" id="link_DISPENSE_FAIL_DISPENSE_WAIT"><path d="M904.4,1001.18 C904.57,942.37 895.31,840.91 835.2,785.39 C777.87,732.44 738.38,772.3 662.2,755.39 C655.64,753.93 654.7863,753.7721 648.0363,752.1621" fill="none" id="DISPENSE_FAIL-to-DISPENSE_WAIT" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="642.2,750.77,650.0264,756.7489,647.0636,751.9301,651.8825,748.9672,642.2,750.77" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.5928" x="899.2" y="883.0369">eTick [timer &gt;= 200] /</text></g><!--SRC=[XLRRRkCs47ttLqmNA61t7SVPThj0WmJm9YhMY1CRjXP1u0I2R8qirX8fY5JIz7lw9_sn3gcBTMsVucYkF6VcaDkVNk3ix1eszkpXzklJ8FyBlm5QN642vv2WHEL4xZvW78VHQ0oAHMIvWkbbrTzc-oDiCzkFy6cg7LueFaJFKU9m274ukeIUYEkhNwV6MoBtd4WUXjRzodxgBMRzoLIUM_W-9IwD-ZGttwoRE-TcjfX_NS_i-V91XsmUft0-66prYQzXRHLcYupRkGzIkGeX5Aw77lY9YC2oLklbFGWEEo4KlBaIRkURbVMmiPpLVB5uUURKmnhtRiXsYOvM0OAC6UUOJ0Rr4XKydJ90DzxhHbwX4ml951EymzF0TzwADyZKlbO8FbNObaruXAxlXX9h-9i4pk-p-Q9HMMUhmL3fPJ3WWc3u06S4PvBk5TndSpE6FuIKBiICphGNALTZ8FHaoY5AKmNl8J8QCs8RFOBQS46kED5UPx0CZu9ek20xrN73z2WPV9v6ScBCPTCZJTOhGwaOX_2VlmDKxn8MOkt2AoP7dSG4vCpQX31odafGRkm6Aat1PTo58xMbM4X1BjDVFm1H_t2H7Iv4Nu7mAuW-1iWDzHwJCN99w3Afpv1eSAaWqyF3b0HV9E32BbMA-bG2TWWnxPVCt5pkmIva_2Zf9ooiMtWBM8Wcbl73P33e7EnYOcfJrUcPiGGzQRB1QTiQuvDjxVzCZualfgSxPJbHjprPQO1qqa4TzgxUIm9oP0dz0jOwBS_6LgcoUmUL9fpGDPvl0M9eg51Kq9LKaIFuQHWQDyEGqiMa4d6ievvv9L0A-eT2zPUzY68QW0WvaSzKK7WIH9AcG517EfxQeMuEd7enNgRVHCHKRuUQyHfA1TL6zxGcD10tZXhnDhRdpLGj1QtOQpl-E9lRcO1UL2dMTeVcOcsFcXHL2yrytN81EHCP2d4Y3eaRmH4nbWKqUkB9JkB0GaWrNncBUXq4EIGvlmHBgxa2cSWzegFl394gXrOmYisjq-E_NLls-Wdin_cDzKDjWEbWzlSDeTAAB9QedJ93j67ebqjpypa9aaAYDxJdzzRokptI4z_Eq9PlFO-PaiBr5Npfk3il6xGq6xRr85FBnNf8eyuIaAJoNNFoyvHIxWNtSZ7Jyseknigg6OOcMQ647OBEIcO_IMlp0e7xIl58tuhIHlw6sHBfWz67B-RcbwDYE8g9CPr84A_wYXsqa2tce7msZCiYmogRJV-F7q-0ThZbf9ENpjkL9rFF-lSQzyixxRTY-9SmcKvNuUL_XMaDRJwlYF1VZ38saXU7gU_eygvwyCmpbuHcVECGzBLJ2OhRldkySaXAKSve9Q7Bc1sNZ1eeSZqaSshqMe272kdbeBNQX-p9ODvUfs4XVofTfRz0gKN_PGEC_4hgXhUBu2xyUv-t7GsrPBRkqe_lYUjFvcdS1tTUYLwmN5J0CY0ILaEAZcYD2e7D7nYVi_MQ_0i0]--></g></svg>